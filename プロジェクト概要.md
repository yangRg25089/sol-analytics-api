[中文](#chinese) | [日本語](#japanese)

<a id="japanese">
📌 **プロジェクト概要**

プロジェクトの概要。このプロジェクトは、ソラナのブロックチェーン上で複数のトークンを発行・管理し、そのためにフロントエンドとバックエンドを分離してウェブプラットフォームを構築することを目的としています。ユーザーはGoogleアカウントでログインし、トークンの取引やアカウント情報の管理、そしてチェーンのデータを可視化することができます。使用している技術スタックは以下の通りです：
- **バックエンド**: Django REST Framework  
- **フロントエンド**: Next.js + NextUI  
- **スマートコントラクト**: Rust（Solana用）  
- **データベース**: SQLite  

---

## **主な機能設計**

### **1. ホームページ（未ログイン時も閲覧可能）**
- Solana関連トークンの一覧表示（1ページあたり20件）  
- CoinGecko APIを利用したトークン価格の取得  
- 右上に「ログイン」ボタンを表示（Googleログイン対応）  

### **2. ユーザー管理**
- GoogleアカウントによるOAuthログイン  
- ログイン時に一意の内部ユーザーIDを生成し、Googleアカウントと紐付け  
- Solanaウォレットアドレスの手動接続をサポート  
- ログアウト機能  

### **3. トークン管理**
- ユーザーが保有するトークンの確認  
- トークンのお気に入り登録/解除  
- 取引管理（送金、交換など）  
- **スーパーユーザー権限**:  
  - トークン発行者は「トークン管理ページ」にアクセス可能  
  - 増発や焼却などの高度な操作が可能  
  - SOLPT以外の複数トークン作成をサポート  

### **4. 取引履歴＆可視化**
- 過去の取引履歴を確認可能  
- Chart.jsを用いた取引トレンドのグラフ表示  

### **5. スタブモード（フロントエンド開発用）**
- スタブモードを有効化し、異なる権限状態（一般ユーザー、トークン発行者など）を模擬的にテスト可能  

---

## **技術構成**

### **フロントエンド**
- **フレームワーク**: Next.js（Reactベース）  
- **UIライブラリ**: NextUI  
- **グラフライブラリ**: Chart.js（取引履歴の可視化用）  
- **状態管理**: React Context / Zustand  
- **API通信**: Axios  

### **バックエンド**
- **フレームワーク**: Django REST Framework  
- **認証**: `django-allauth`（Googleログイン統合）  
- **データベース**: SQLite（Djangoデフォルト）  
- **ブロックチェーン連携**: `solana-py`  

### **スマートコントラクト設計（Solanaトークン）**
- **言語**: Rust  
- **フレームワーク**: Anchor Framework  
- **デプロイ環境**: SolanaメインネットまたはDevnet  

#### **機能モジュール**
1. **トークン作成**:  
   - スーパーユーザーが新しいSPLトークン（SOLPTなど）を作成可能  
   - トークンメタデータ（シンボル、総供給量、精度）を保存  

2. **トークン増発/焼却**:  
   - 特定アカウントによる増発・焼却操作をサポート  
   - 操作ごとにチェーン上に記録され、監査可能  

3. **送金と承認**:  
   - ウォレット間のトークン転送  
   - ステーキングなどの承認操作をサポート  

4. **セキュリティ機構**:  
   - マルチシグ（オプション）  
   - アドレスホワイトリスト（オプション）  

---

## **API設計**

| API                              | メソッド  | 説明                                       |
|----------------------------------|----------|--------------------------------------------|
| `/api/auth/google_login/`       | `POST`   | Googleログイン                              |
| `/api/auth/logout/`             | `POST`   | ログアウト                                  |
| `/api/auth/get_user/`           | `GET`    | ログイン中のユーザー情報を取得              |
| `/api/wallet/connect/`          | `POST`   | Solanaウォレットアドレスを紐付け            |
| `/api/tokens/`                  | `GET`    | トークン市場一覧を取得                      |
| `/api/tokens/market-list/`      | `POST`   | 市場データをPOSTで取得（ホームページ表示用）|
| `/api/tokens/{id}/favorite/`    | `POST`   | トークンをお気に入り登録                    |
| `/api/tokens/{id}/unfavorite/`  | `POST`   | トークンをお気に入り解除                    |
| `/api/tokens/{id}/transfer/`    | `POST`   | トークン送金（受信アドレスと数量を指定）    |
| `/api/tokens/{id}/history/`     | `GET`    | トークン取引履歴を取得（可視化用）          |
| `/api/tokens/{id}/manage/`      | `POST`   | スーパーユーザーが増発/焼却を実行           |
| `/api/tokens/{id}/`             | `GET`    | 単一トークン情報を取得                      |
| `/api/tokens/{id}/`             | `PUT`    | トークン情報を更新                          |
| `/api/tokens/{id}/`             | `DELETE` | トークンを削除（スーパーユーザー専用）      |

**備考**:  
- `/tokens/{id}/xxx/` の `{id}` はトークンの一意なID  
- `/tokens/` の `GET` は市場一覧用、`POST`（トークン作成）は権限制限あり  
- `/tokens/market-list/` は柔軟な市場データ取得用のカスタムPOSTエンドポイント  

---

## **データベース設計**

### **1. `users` テーブル（ユーザー情報）**
| フィールド名      | タイプ      | 説明                                       |
|-------------------|-------------|--------------------------------------------|
| `id`              | Integer     | 主キー、自動増分                           |
| `google_id`       | String      | GoogleアカウントID（一意）                 |
| `solana_address`  | String      | 紐付けられたウォレットアドレス             |
| `name`            | String      | ユーザー名（デフォルト空、編集可能）       |
| `avatar_url`      | String      | プロフィール画像URL（空許可）              |
| `role`            | String      | ユーザーロール（`user`, `token_issuer`, `admin`） |
| `created_at`      | DateTime    | 登録日時                                   |
| `updated_at`      | DateTime    | 更新日時                                   |
| `is_active`       | Boolean     | アカウント有効状態（デフォルト `True`）    |

### **2. `tokens` テーブル（トークン情報）**
| フィールド名      | タイプ      | 説明                                       |
|-------------------|-------------|--------------------------------------------|
| `id`              | Integer     | 主キー                                     |
| `name`            | String      | トークン名                                 |
| `symbol`          | String      | トークンシンボル（例: SOLPT）              |
| `total_supply`    | Integer     | 総供給量                                   |
| `owner_id`        | Integer     | 発行者ID（`users`テーブル参照）            |
| `created_at`      | DateTime    | 作成日時                                   |
| `updated_at`      | DateTime    | 更新日時                                   |
| `is_active`       | Boolean     | トークン有効状態（デフォルト `True`）      |

### **3. `transactions` テーブル（取引履歴）**
| フィールド名      | タイプ      | 説明                                       |
|-------------------|-------------|--------------------------------------------|
| `id`              | Integer     | 主キー                                     |
| `token_id`        | Integer     | トークンID（`tokens`テーブル参照）         |
| `from_address`    | String      | 送信元アドレス                             |
| `to_address`      | String      | 受信先アドレス                             |
| `amount`          | Integer     | 取引数量                                   |
| `timestamp`       | DateTime    | 取引日時                                   |
| `created_at`      | DateTime    | 作成日時                                   |
| `updated_at`      | DateTime    | 更新日時                                   |

### **4. `favorites` テーブル（お気に入りトークン）**
| フィールド名      | タイプ      | 説明                                       |
|-------------------|-------------|--------------------------------------------|
| `id`              | Integer     | 主キー                                     |
| `user_id`         | Integer     | ユーザーID（`users`テーブル参照）          |
| `token_id`        | Integer     | トークンID（`tokens`テーブル参照）         |
| `created_at`      | DateTime    | 作成日時                                   |
| `updated_at`      | DateTime    | 更新日時                                   |

### **5. `permissions` テーブル（権限管理）**
| フィールド名      | タイプ      | 説明                                       |
|-------------------|-------------|--------------------------------------------|
| `id`              | Integer     | 主キー                                     |
| `user_id`         | Integer     | ユーザーID（`users`テーブル参照）          |
| `token_id`        | Integer     | トークンID（`tokens`テーブル参照）         |
| `can_manage`      | Boolean     | 管理権限の有無（True/False）               |
| `created_at`      | DateTime    | 作成日時                                   |
| `updated_at`      | DateTime    | 更新日時                                   |

---

## **画面UI設計**

### **ホームページ（未ログイン時）**
- トークン一覧（ページネーション対応）  
- 価格表示（CoinGecko API連携）  
- Googleログインボタン  

### **ホームページ（ログイン後）**
- トークン一覧＆価格  
- 保有資産の表示  
- 取引履歴（グラフ付き）  

### **トークン管理ページ（スーパーユーザー向け）**
- 増発/焼却機能  
- トークン統計データ  

---

## **プロジェクトフロー**
1. ユーザーがホームページにアクセス（トークン情報を閲覧可能）  
2. Googleログインを実行し、OAuth認証を完了  
3. システムが一意のユーザーIDを割り当て、Googleアカウントと紐付け  
4. Solanaウォレットアドレスを手動で接続可能  
5. トークン管理（送金、お気に入り登録など）が可能  
6. スーパーユーザーはトークン管理ページで特別操作を実行  
7. 取引履歴を確認し、Chart.jsで可視化  
8. ログアウト可能  

---

## **まとめ**
本プロジェクトは、Solanaブロックチェーンを活用したトークン発行・取引管理プラットフォームです。Django REST（バックエンド）、Next.js（フロントエンド）、Rust（スマートコントラクト）を採用し、セキュリティと効率性を確保します。スーパーユーザー機能により、トークン発行者が柔軟に管理可能です。さらに、フロントエンド開発効率化のためスタブモードを導入し、SQLiteで高速な開発を実現します。